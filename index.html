<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pour Mimi üíò</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#f3f0ff;
      --text:#111827;
      --yes:#22c55e;
      --no:#fb7185;
      --card:#ffffffcc;
      --shadow: 0 20px 60px rgba(31,41,55,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg1), transparent 60%),
                  radial-gradient(1200px 800px at 80% 90%, var(--bg2), transparent 60%),
                  #fff;
      overflow:hidden;
    }
    canvas{position:fixed; inset:0; pointer-events:none}

    .card{
      width:min(820px, 92vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid #fff;
      border-radius:28px;
      padding:26px 22px 18px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }

    .top{
      text-align:center;
      padding:10px 10px 0;
    }
    .hello{
      font-size: clamp(20px, 3.2vw, 28px);
      margin: 4px 0 8px;
      font-weight: 700;
      letter-spacing: .2px;
    }
    .question{
      font-size: clamp(24px, 4.6vw, 40px);
      margin: 0 0 10px;
      font-weight: 900;
      line-height: 1.05;
    }
    .sub{
      margin:0;
      font-size: 16px;
      opacity:.85;
    }

    /* Buttons bottom */
    .actions{
      position:relative;
      margin-top:18px;
      height:130px;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      padding-bottom:8px;
    }
    button{
      border:0;
      padding:18px 26px;
      border-radius:999px;
      font-size:20px;
      font-weight:800;
      cursor:pointer;
      box-shadow: 0 16px 30px rgba(0,0,0,.10);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      user-select:none;
      touch-action: manipulation;
    }
    button:hover{transform: translateY(-2px); box-shadow: 0 20px 34px rgba(0,0,0,.12)}
    #yes{background: linear-gradient(180deg, #34d399, var(--yes)); color:white}
    #no{
      background: white;
      color: #fb7185;
      border:2px solid #fecdd3;
    }

    /* non button floating inside .actions */
    .floating-no{
      position:absolute;
      left:50%;
      top:38px;
      transform: translateX(150px);
    }

    .hint{
      text-align:center;
      margin-top:6px;
      font-size:14px;
      opacity:.70;
    }

    /* result overlay */
    .overlay{
      position:absolute;
      inset:0;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      display:none;
      padding:18px;
      overflow:auto;
    }
    .overlay.show{display:block}

    .overlay h2{
      margin:6px 0 8px;
      font-size: clamp(22px, 4vw, 32px);
      text-align:center;
    }
    .overlay .love{
      text-align:center;
      font-size:16px;
      opacity:.9;
      margin: 0 0 14px;
      font-weight:600;
    }

    /* gallery */
    .gallery{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:10px;
    }
    @media (min-width: 720px){
      .gallery{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }
    .pic{
      border-radius:18px;
      overflow:hidden;
      background:#fff;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      border:1px solid rgba(255,255,255,.7);
      position:relative;
      aspect-ratio: 4 / 5;
    }
    .pic img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .cap{
      position:absolute;
      left:10px; right:10px; bottom:10px;
      padding:8px 10px;
      border-radius:14px;
      background: rgba(255,255,255,.85);
      font-size:13px;
      font-weight:700;
      line-height:1.2;
    }

    /* inside jokes */
    .jokes{
      margin-top:14px;
      background: rgba(255,255,255,.8);
      border:1px solid rgba(255,255,255,.9);
      border-radius:20px;
      padding:14px 14px 10px;
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
    }
    .jokes h3{
      margin:0 0 8px;
      font-size:16px;
    }
    .jokes ul{
      margin:0;
      padding-left:18px;
      font-size:14px;
      line-height:1.45;
    }

    /* hearts */
    .heart{
      position:fixed;
      font-size: 22px;
      will-change: transform, opacity;
      pointer-events:none;
      animation: floatUp 1200ms ease-out forwards;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.10));
    }
    @keyframes floatUp{
      from{ transform: translateY(10px) scale(.9); opacity:1 }
      to{ transform: translateY(-220px) scale(1.35); opacity:0 }
    }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="card" id="card">
    <div class="top">
      <div class="hello">Bonjour Mimi, üíò</div>
      <div class="question">Tu veux √™tre mon amoureuse pour la vie ?</div>
      <p class="sub">Promis je m‚Äôoccupe du reste üòá</p>
    </div>

    <div class="actions" id="stage">
      <button id="yes" type="button">OUIIIII üíû</button>
      <button id="no" class="floating-no" type="button">Non üòÖ</button>
    </div>

    <div class="hint">PS : essaie de cliquer sur ‚ÄúNon‚Äù üòà</div>

    <!-- overlay after YES -->
    <div class="overlay" id="overlay" aria-live="polite">
      <h2>ELLE A DIT OUI üíñ</h2>
      <div class="love" id="loveLine">Je t‚Äôaime fort Mimi. Merci pour notre ann√©e ensemble ‚ú®</div>

      <div class="gallery" id="gallery"></div>

      <div class="jokes">
        <h3>Nos petits d√©lires / clins d‚Äô≈ìil üòÑ</h3>
        <ul id="jokesList"></ul>
      </div>
    </div>
  </div>

  <script>
    // ========== PERSONNALISATION ==========
    // 1) Mets tes images dans le m√™me dossier que index.html
    // 2) Remplace les filenames ci-dessous (ex: "mimi-01.jpg")
    // 3) Ajoute/√©dite les l√©gendes + vos d√©lires
    const PHOTOS = [
      { src: "photo1.jpg", caption: "Notre premier truc m√©morable ‚ú®" },
      { src: "photo2.jpg", caption: "Ce jour-l√†‚Ä¶ üò≠‚ù§Ô∏è" },
      { src: "photo3.jpg", caption: "Notre d√©lire pr√©f√©r√© üòÇ" },
      { src: "photo4.jpg", caption: "Toi, magnifique üíò" },
      { src: "photo5.jpg", caption: "Nous ü´∂" },
      { src: "photo6.jpg", caption: "Encore un souvenir üíû" },
    ];

    const INSIDE_JOKES = [
      "Le d√©lire du ______ (√† compl√©ter)",
      "Quand on a dit ______ et qu‚Äôon a explos√© de rire",
      "Notre phrase secr√®te : ‚Äú______‚Äù",
      "Le jour o√π ______ (et on s‚Äôen remet toujours pas)",
    ];

    // Message apr√®s le OUI (tu peux le modifier)
    const YES_MESSAGE = "Je t‚Äôaime fort Mimi. Merci pour notre ann√©e ensemble ‚ú®";
    // =====================================

    // --- Non button evasion ---
    const noBtn = document.getElementById('no');
    const stage = document.getElementById('stage');

    function moveNoButton() {
      const rect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const pad = 6;

      const maxX = rect.width - btnRect.width - pad;
      const maxY = rect.height - btnRect.height - pad;

      const x = Math.max(pad, Math.random() * maxX);
      const y = Math.max(pad, Math.random() * maxY);

      noBtn.style.left = x + 'px';
      noBtn.style.top  = y + 'px';
      noBtn.style.transform = 'none';
    }

    ['mouseenter','touchstart','pointerdown','mousedown'].forEach(evt => {
      noBtn.addEventListener(evt, (e) => {
        e.preventDefault();
        moveNoButton();
      }, {passive:false});
    });

    // --- YES animation + reveal overlay ---
    const yesBtn = document.getElementById('yes');
    const overlay = document.getElementById('overlay');
    const gallery = document.getElementById('gallery');
    const jokesList = document.getElementById('jokesList');
    const loveLine = document.getElementById('loveLine');

    // setup overlay content
    loveLine.textContent = YES_MESSAGE;

    function renderGallery(){
      gallery.innerHTML = "";
      PHOTOS.forEach(p => {
        const wrap = document.createElement("div");
        wrap.className = "pic";

        const img = document.createElement("img");
        img.src = p.src;
        img.alt = p.caption || "Souvenir";

        const cap = document.createElement("div");
        cap.className = "cap";
        cap.textContent = p.caption || "";

        wrap.appendChild(img);
        wrap.appendChild(cap);
        gallery.appendChild(wrap);
      });
    }

    function renderJokes(){
      jokesList.innerHTML = "";
      INSIDE_JOKES.forEach(j => {
        const li = document.createElement("li");
        li.textContent = j;
        jokesList.appendChild(li);
      });
    }

    renderGallery();
    renderJokes();

    // confetti canvas
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let W, H, rafId;
    function resize(){
      W = canvas.width = window.innerWidth * devicePixelRatio;
      H = canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resize);
    resize();

    function spawnHeart(x, y){
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = Math.random() > 0.5 ? 'üíñ' : 'üíò';
      heart.style.left = x + 'px';
      heart.style.top  = y + 'px';
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 1300);
    }

    const particles = [];
    function addConfettiBurst(cx, cy){
      for(let i=0;i<160;i++){
        particles.push({
          x: cx, y: cy,
          vx: (Math.random()*2-1) * (4 + Math.random()*5),
          vy: (Math.random()*-1) * (7 + Math.random()*6),
          g: 0.22 + Math.random()*0.18,
          r: 2 + Math.random()*3,
          a: 1,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*2-1)*0.18
        });
      }
      runFX();
    }

    function runFX(){
      if(rafId) return;
      const start = performance.now();
      const duration = 1900;

      function tick(t){
        ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

        for(let i=particles.length-1;i>=0;i--){
          const p = particles[i];
          p.vy += p.g;
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.a -= 0.008;

          if(p.a <= 0 || p.y > window.innerHeight + 30){
            particles.splice(i,1);
            continue;
          }

          ctx.save();
          ctx.globalAlpha = Math.max(0,p.a);
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = `hsl(${(i*17)%360} 90% 55%)`;
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*2.2);
          ctx.restore();
        }

        if(particles.length && (t - start) < duration){
          rafId = requestAnimationFrame(tick);
        } else {
          cancelAnimationFrame(rafId);
          rafId = null;
          ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
          particles.length = 0;
        }
      }
      rafId = requestAnimationFrame(tick);
    }

    yesBtn.addEventListener('click', (e)=>{
      const x = e.clientX || window.innerWidth/2;
      const y = e.clientY || window.innerHeight/2;

      // hearts burst
      for(let i=0;i<22;i++){
        setTimeout(()=>spawnHeart(
          x + (Math.random()*140-70),
          y + (Math.random()*70-35)
        ), i*28);
      }
      addConfettiBurst(x, y);

      // show overlay
      overlay.classList.add("show");

      // disable buttons
      yesBtn.disabled = true;
      noBtn.disabled = true;
      yesBtn.style.opacity = 0.95;
      noBtn.style.opacity = 0.6;

      document.title = "üíñ Mimi a dit OUI";
    });

    // playful start
    setTimeout(moveNoButton, 400);
  </script>
</body>
</html>
